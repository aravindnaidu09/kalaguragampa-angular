<!-- 🔍 Filter Controls (wrap layout, no horizontal scroll) -->
<div class="order-filters v2">

  <!-- Status row -->
  <div class="filter-row">
    <div class="filter-label">Status:</div>

    <div class="chip-grid">
      <button type="button" class="chip-v3" *ngFor="let s of statusOptions" (click)="selectStatus(s.key)"
        [class.active]="selectedStatus === s.key" role="radio" [attr.aria-checked]="selectedStatus === s.key">
        <span class="dot" [style.background]="s.color" aria-hidden="true"></span>
        <span class="label">{{ s.label }}</span>
        <span class="count" *ngIf="statusCounts?.[s.key]">{{ statusCounts[s.key] }}</span>
      </button>
    </div>
  </div>

  <!-- Time row -->
  <div class="filter-row">
    <div class="filter-label">Time:</div>
    <select [(ngModel)]="selectedTime" (change)="onTimeFilterChange()" class="time-select">
      <option value="3">Last 3 Months</option>
      <option value="6">Last 6 Months</option>
      <option value="12">Last 1 Year</option>
      <option value="2024">Year: 2024</option>
      <option value="2023">Year: 2023</option>
    </select>
  </div>
</div>

<!-- 💬 Active Filter Summary Chips -->
<div class="active-filters v2" *ngIf="selectedStatus !== 'all' || selectedTime !== '3'">
  <span *ngIf="selectedStatus !== 'all'" class="chip">
    Status: {{ getStatusLabel(selectedStatus) }}
    <button (click)="clearStatus()">✕</button>
  </span>
  <span *ngIf="selectedTime !== '3'" class="chip">
    Time: {{ getTimeLabel(selectedTime) }}
    <button (click)="clearTime()">✕</button>
  </span>

  <button class="reset-btn" (click)="resetFilters()">Reset Filters</button>
</div>


<!-- 📦 Order List -->
<div class="order-history">
  <h2 class="title">
    Your Orders
    <span class="order-count">{{ totalCountSignal() }}</span>
  </h2>

  <!-- 🦴 Skeleton Loader -->
  <ng-container *ngIf="loadingSignal()">
    <div class="skeleton-card" *ngFor="let _ of [1, 2, 3]"></div>
  </ng-container>

  <!-- 📋 Order Cards -->
  <ng-container *ngIf="!loadingSignal() && paginatedOrders().length > 0; else noOrders">
    <ng-container *ngFor="let item of paginatedOrders()">
      <app-order-card [item]="item" [@fadeInUp]></app-order-card>
    </ng-container>

    <!-- 📄 Pagination -->
    <div class="pagination">
      <button class="page-btn" (click)="prevPage()" [disabled]="currentPage === 1">
        Previous
      </button>

      <span class="page-indicator">Page {{ currentPage }}</span>

      <button class="page-btn" (click)="nextPage()
        " [disabled]="(currentPage * pageSize) >= totalCountSignal()">
        Next
      </button>
    </div>
  </ng-container>

  <!-- 🙅 No Orders Fallback -->
  <ng-template #noOrders>
    <div class="empty-state">
      <img src="../../../../../assets/images/no-orders.jpeg" alt="No Orders" />
      <p>You haven’t placed any orders yet.</p>
    </div>
  </ng-template>
</div>
